# -*- Makefile -*-
#
# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
#
#                               Michael A.G. Aivazis
#                        California Institute of Technology
#                        (C) 1998-2003  All Rights Reserved
#
# <LicenseText>
#
# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
#

PROJECT = array_kluge

# directory structure

DIR_SRC = lib
DIR_MODULE = module
DIR_PYTHON = array_kluge
DIR_TESTS = tests
DIR_EXAMPLES = examples


BUILD_DIRS = \
    $(DIR_SRC) \
    $(DIR_MODULE) \
    $(DIR_PYTHON) \

OTHER_DIRS = \
    $(DIR_TESTS) \
    $(DIR_EXAMPLES)

RECURSE_DIRS = $(BUILD_DIRS) $(OTHER_DIRS)

# targets

all: update

update: $(BUILD_DIRS)

release: tidy
	cvs release .

test: update
	(cd $(DIR_TESTS); $(MM) test)

.PHONY: $(DIR_SRC)
$(DIR_SRC):
	(cd $(DIR_SRC); $(MM))


.PHONY: $(DIR_MODULE)
$(DIR_MODULE):
	(cd $(DIR_MODULE); $(MM))


.PHONY: $(DIR_PYTHON)
$(DIR_PYTHON):
	(cd $(DIR_PYTHON); $(MM))


.PHONY: $(DIR_TESTS)
$(DIR_TESTS):
	(cd $(DIR_TESTS); $(MM))


.PHONY: $(DIR_EXAMPLES)
$(DIR_EXAMPLES):
	(cd $(DIR_EXAMPLES); $(MM))


tidy::
	BLD_ACTION="tidy" $(MM) recurse

clean::
	BLD_ACTION="clean" $(MM) recurse
	$(RM) $(RMFLAGS) $(BLD_TMPDIR)/$(PROJECT) $(BLD_LIBDIR)/$(PROJECT)

distclean::
	BLD_ACTION="distclean" $(MM) recurse

docs::
	BLD_ACTION="docs" $(MM) recurse


# version
# $Id: Make.mm 48 2007-05-15 17:18:00Z linjiao $

#
# End of file
